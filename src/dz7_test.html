<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="homework-container">
</div>

<script>
//    Define main container

    let homeworkContainer = document.querySelector('#homework-container');

//    Define auxiliary html container elements

    var form = document.createElement('form');
    form.setAttribute('class', 'the_form');
    form.innerHTML = '<input type="text" name="cook_name" placeholder="Cookie name" style="margin-top: 20px"></br>' +
        '<input type="text" name="cook_value" placeholder="Cookie value"></br>' +
        '<button id="add-button">Add</button></form>';

    var filterblock = document.createElement('div');
    filterblock.innerHTML = '<input type ="text" id="filter-name-input" style ="margin-bottom:20px">';

    var divtable = document.createElement('div');
    divtable.innerHTML = '<table id ="list-table" style="border:1px solid grey; border-collapse: collapse;"></table>';


//    Adding these html elements
    homeworkContainer.appendChild(filterblock);
    homeworkContainer.appendChild(divtable);
    homeworkContainer.appendChild(form);

//    Getting html elements for further processing

    let listTable = homeworkContainer.querySelector('#list-table');
    let addButton = homeworkContainer.querySelector('#add-button');
    let filterNameInput = homeworkContainer.querySelector('#filter-name-input');

//    Main code

//    document.cookie = 'name=Value; expires= Thu, 01 Jan 2025 00:00:00 GMT;';
//    document.cookie = 'name2=Value2';
//    document.cookie = 'name3=Value3';
    list_table();

    function list_table() {
        var cookie_split = document.cookie.split(';');

        cookie_split.forEach(function (item, i , cookie_split) {
            var name_value = cookie_split[i].split('=');
            var line = document.createElement('tr');
            var button = document.createElement('button');

            name_value.forEach((item) => {
                var cell = document.createElement('td');
                cell.setAttribute('style', 'border:1px solid grey;');
                cell.innerHTML = item;
                line.appendChild(cell);
            });

            button.innerText = 'Delete';
            button.addEventListener('click', (e) => {
                var promise = new Promise ((resolve) => {
                    var line = e.target.parentElement;
                    document.cookie = line.children[0].innerText + '=' + line.children[1].innerText +
                        ';expires=Thu, 01 Jan 1970 00:00:01 GMT;';
                    resolve(line);
                })
                    .then ((line) => {
                        for (var i = 0; i <line.children.length; i++) {
                            line.removeChild(line.children[i]);
                            i--;
                        };
                    });
            });
            line.appendChild(button);
            listTable.appendChild(line);
        });
    }

//  adding new cookie line to form

    addButton.addEventListener('click', () => {

        var form_one = document.forms[0];
        var cell_name = form_one.cook_name.value;
        var cell_value = form_one.cook_value.value;
        var line = document.createElement('tr');
        var button = document.createElement('button');
        var cell = document.createElement('td');

        document.cookie = cell_name + '=' + cell_value;

        cell.setAttribute('style', 'border:1px solid grey;')
//        cell.innerHTML = cell_name;
        line.appendChild(cell);
        listTable.appendChild(line);

    });

    function isMatching(full, chunk) {
        full = full.toLowerCase();
        chunk = chunk.toLowerCase();
        if (~full.indexOf(chunk)) {

            return true;
        } else {

            return false;
        }
    }



//        var button = document.createElement('button');
//        button.innerText = 'Delete';
//        button.addEventListener('click', (e) => {
//            var promise = new Promise ((resolve) => {
//                var line = e.Target.parentNode.parentNode;
//                document.cookie = line.children[0].innerText + '=' + line.children[1].innerText +
//                    ';expires=Thu, 01 Jan 1970 00:00:01 GMT;';
//                resolve(line);
//            })
//                .then ((line) => {
//                    for (var i = 0; i <line.children.length; i++) {
//                        line.removeChild(line.children[i]);
//                        i--;
//                    };
//                });
//        });
//        cookie_second_split = cookie_split[i].split('=');
//
//
//        insert = '<tr><td style="border:1px solid grey">' + cookie_second_split[0] + '</td> ' +
//            '<td style="border:1px solid grey">' + cookie_second_split[1] + '</td>' +
//            '<td style="border:1px solid grey"></td></tr>';
//        listTable.innerHTML += insert;
//        listTable.querySelector.appendchild(button);
//    });


//    var linedel = listTable.getElementsByTagName('button');
//    linedel.addEventListener('click', (e) => {
//        var promise = new Promise ((resolve) => {
//            var line = e.Target.parentNode.parentNode;
//            document.cookie = line.children[0].innerText + '=' + line.children[1].innerText +
//                ';expires=Thu, 01 Jan 1970 00:00:01 GMT;';
//            resolve(line);
//        })
//            .then ((line) => {
//                for (var i = 0; i <line.children.length; i++) {
//                    line.removeChild(line.children[i]);
//                    i--;
//                };
//            });
//    });

//    addform.innerHTML = '<form class = "form" action ="" method="GET">' +
//            '<input type="text" placeholder="Name"></br>' + '<input type="text" placeholder="value"></br>' +
//            '<button>Add</button></form>';


//    filterNameInput.addEventListener('keyup', function() {
//    });
//
//    addButton.addEventListener('click', () => {
//    });

//    var button = '<input type=\'submit\' value=\'Delete cookie\' onsubmit=\'' + cookie_second_split[0] +
//        '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;\'>'

</script>
</body>
</html>